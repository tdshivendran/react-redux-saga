(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{216:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(34),o=a.n(c),u=a(24),i=a(85),s=a(97),l=a(37),d=a(5),p=a.n(d),f=a(6),m=a(29),b=(a(54),{findLocationByLatLng:function(){var e=Object(m.a)(p.a.mark(function e(t,a){var r,n,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[t,a].join(","),e.next=3,fetch("https://react-assessment-api.herokuapp.com/api/weather/location/search/?lattlong=".concat(r));case 3:if((n=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:{code:n.status}});case 6:return e.next=8,n.json();case 8:return c=e.sent,e.abrupt("return",{data:c});case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),findWeatherbyId:function(){var e=Object(m.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-assessment-api.herokuapp.com/api/weather/location/".concat(t,"/"));case 2:if((a=e.sent).ok){e.next=5;break}return e.abrupt("return",{error:{code:a.status}});case 5:return e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",{data:r});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getDroneData:function(){var e=Object(m.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-assessment-api.herokuapp.com/api/drone");case 2:if((t=e.sent).ok){e.next=5;break}return e.abrupt("return",{error:{code:t.status}});case 5:return e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",{data:a});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),h="COMMAND/FETCH_WEATHER_FOR_LAT_LNG",O="EVENT/API_ERROR_RECEIVED",j="EVENT/WEATHER_DATA_RECEIVED",E="EVENT/WEATHER_ID_RECEIVED",v="COMMAND/FETCH_DRONE_DATA",g="EVENT/DRONE_DATA_RECEIVED",w="EVENT/DRONE_DATA_ERROR",y=p.a.mark(_),x=p.a.mark(k),D=p.a.mark(T);function _(e){var t,a,r,n;return p.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.id,c.next=3,Object(f.b)(b.findWeatherbyId,t);case 3:if(a=c.sent,r=a.error,n=a.data,!r){c.next=12;break}return c.next=9,Object(f.d)({type:O,code:r.code});case 9:return c.next=11,Object(f.c)();case 11:return c.abrupt("return");case 12:return c.next=14,Object(f.d)({type:j,data:n});case 14:case"end":return c.stop()}},y)}function k(e){var t,a,r,n,c,o;return p.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.latitude,a=e.longitude,u.next=3,Object(f.b)(b.findLocationByLatLng,t,a);case 3:if(r=u.sent,n=r.error,c=r.data,!n){u.next=13;break}return console.log({error:n}),u.next=10,Object(f.d)({type:O,code:n.code});case 10:return u.next=12,Object(f.c)();case 12:return u.abrupt("return");case 13:if(o=!!c[0]&&c[0].woeid){u.next=20;break}return u.next=17,Object(f.d)({type:O});case 17:return u.next=19,Object(f.c)();case 19:return u.abrupt("return");case 20:return u.next=22,Object(f.d)({type:E,id:o});case 22:case"end":return u.stop()}},x)}function T(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([Object(f.e)(h,k),Object(f.e)(E,_)]);case 2:case"end":return e.stop()}},D)}var R=[T],A=p.a.mark(N),L=p.a.mark(C);function N(e){var t,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(b.getDroneData);case 2:if(t=e.sent,a=t.error,r=t.data,!a){e.next=12;break}return console.log("error",{error:a}),e.next=9,Object(f.d)({type:w,payload:a.code});case 9:return e.next=11,Object(f.c)();case 11:return e.abrupt("return");case 12:return e.next=14,Object(f.d)({type:g,data:r});case 14:case"end":return e.stop()}},A)}function C(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([Object(f.e)(v,N)]);case 2:case"end":return e.stop()}},L)}var M=[C],I=a(30),V=p.a.mark(W),F=p.a.mark(S);function W(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.b)(I.toast.error,"Error Received: ".concat(e.code));case 2:case"end":return t.stop()}},V)}function S(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.e)(O,W);case 2:case"end":return e.stop()}},F)}var H=[S],B=p.a.mark(P),G=p.a.mark(J);function P(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.b)(I.toast.error,"Drone data fetch error: ".concat(e.code));case 2:case"end":return t.stop()}},B)}function J(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.e)(w,P);case 2:case"end":return e.stop()}},G)}var z,$,q=[J],K=[].concat(Object(l.a)(H),Object(l.a)(q),Object(l.a)(R),Object(l.a)(M)),Q=a(20),U=a(98),X=a(23),Y={loading:!1,weatherId:null,name:"",temperature:"",weather_state_name:"",latitude:null,longitude:null,data:{}},Z=(z={},Object(Q.a)(z,h,function(e,t){return Object(X.a)({},e,{loading:!0})}),Object(Q.a)(z,E,function(e,t){return Object(X.a)({},e,{weatherId:t.id})}),Object(Q.a)(z,j,function(e,t){var a=t.data;if(!a.consolidated_weather)return e;var r,n=a.consolidated_weather[0],c=n.weather_state_name,o=n.the_temp,u=a.latt_long,i=a.title,s=u.split(","),l=Object(U.a)(s,2),d=l[0],p=l[1];return Object(X.a)({},e,{loading:!1,latitude:d,longitude:p,temperatureinCelsius:o,temperatureinFahrenheit:(r=o,9*r/5+32),weather_state_name:c,name:i,data:t.data})}),z),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=Z[t.type];return"undefined"===typeof a?e:a(e,t)},te={loading:null,drone_data:{},current_data:{},error:!1},ae=($={},Object(Q.a)($,h,function(e,t){if(!1!==e.loading)return Object(X.a)({},e,{loading:!0})}),Object(Q.a)($,g,function(e,t){var a=t.data.data;return Object(X.a)({},e,{loading:!1,drone_data:a.data,current_data:a[a.length-1],error:!1})}),Object(Q.a)($,w,function(e,t){return Object(X.a)({},e,{loading:!1,error:!0})}),$),re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,a=ae[t.type];return"undefined"===typeof a?e:a(e,t)},ne=a(31),ce=a(14),oe=a(96),ue=a.n(oe),ie=(a(117),a(46)),se=a.n(ie),le=a(90),de=a.n(le),pe=a(91),fe=a.n(pe),me=a(48),be=a(49),he=a(52),Oe=a(50),je=a(51),Ee=a(89),ve=a.n(Ee),ge=a(88),we=a.n(ge),ye=Object(ce.withStyles)(function(e){return{root:{background:e.palette.secondary.main},label:{color:e.palette.primary.main}}})(we.a),xe=function(e){function t(){return Object(me.a)(this,t),Object(he.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(je.a)(t,e),Object(be.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.name,r=e.weather_state_name,c=e.temperatureinFahrenheit;return t?n.a.createElement(ve.a,null):n.a.createElement(ye,{label:"Weather in ".concat(a,": ").concat(r," and ").concat(c,"\xb0")})}}]),t}(r.Component),De=Object(ne.b)(function(e,t){var a=e.weather;return{loading:a.loading,name:a.name,weather_state_name:a.weather_state_name,temperatureinFahrenheit:a.temperatureinFahrenheit}},function(e){return{onLoad:function(){return e({type:h,longitude:-95.3698,latitude:29.7604})}}})(xe),_e=Object(ce.withStyles)({grow:{flexGrow:1}})(function(e){var t=e.classes;return n.a.createElement(de.a,{position:"static"},n.a.createElement(fe.a,null,n.a.createElement(se.a,{variant:"h6",color:"inherit",className:t.grow},""," EOG React Visualization Assessment"),n.a.createElement(De,null)))}),ke=Object(ce.withStyles)(function(e){return{wrapper:{background:e.palette.background.main,height:"100vh"}}})(function(e){var t=e.classes;return n.a.createElement("div",{className:t.wrapper},e.children)}),Te=a(94),Re=a.n(Te),Ae=a(93),Le=a.n(Ae),Ne=a(95),Ce=a.n(Ne),Me=a(25),Ie=a(92),Ve=a.n(Ie),Fe=a(35),We=a.n(Fe),Se=a(36),He=a.n(Se),Be=function(e){function t(e){var a;return Object(me.a)(this,t),(a=Object(he.a)(this,Object(Oe.a)(t).call(this,e))).fetchData=a.fetchData.bind(Object(Me.a)(Object(Me.a)(a))),a.daysDiff=a.daysDiff.bind(Object(Me.a)(Object(Me.a)(a))),a}return Object(je.a)(t,e),Object(be.a)(t,[{key:"fetchData",value:function(){this.props.onLoad()}},{key:"componentDidMount",value:function(){setInterval(this.fetchData,2e3)}},{key:"daysDiff",value:function(e,t){var a=e.getTime(),r=t.getTime()-a;r/=1e3;var n=Math.floor(r%60);r/=60;var c=Math.floor(r%60);r/=60;var o=Math.floor(r%24),u=Math.floor(r/24);return u>0?1===u?u+" day ago":u+" days ago":o>0?1===o?o+" hour ago":o+" hours ago":c>0?1===c?c+" minute ago":c+" minutes ago":n>0?1===n?n+" second ago":n+" seconds ago":void 0}},{key:"render",value:function(){var e=this.props,t=e.current_data,a=e.error;if(a)return n.a.createElement("div",null,"Error fetching drone data!");if(Object.getOwnPropertyNames(t).length){var r=new Date,c=new Date(t.timestamp),o=this.daysDiff(c,r),u=c.toLocaleDateString()+" "+c.toLocaleTimeString()+" ("+o+")";return n.a.createElement("div",null,n.a.createElement("div",{style:{textAlign:"center"}},!a&&n.a.createElement("span",null," Data being fetched every 2 seconds"),a&&n.a.createElement("span",null," Error Fetching Drone Data")),n.a.createElement(Ve.a,{style:{textAlign:"center"}},n.a.createElement(We.a,null,n.a.createElement(He.a,{primary:"Temperature (\xb0F)",secondary:t.metric})),n.a.createElement(We.a,null,n.a.createElement(He.a,{primary:"Latitude",secondary:t.latitude})),n.a.createElement(We.a,null,n.a.createElement(He.a,{primary:"Longitude",secondary:t.longitude})),n.a.createElement(We.a,null,n.a.createElement(He.a,{primary:"Last Received",secondary:u}))))}return n.a.createElement("div",{style:{textAlign:"center"}},"Fetching Data")}}]),t}(r.Component),Ge=Object(ne.b)(function(e,t){var a=e.droneData;return{loading:a.loading,drone_data:a.drone_data,metric:a.metric,current_data:a.current_data,error:a.error}},function(e){return{onLoad:function(){return e({type:v,payload:null})}}})(Be),Pe=Object(ce.withStyles)(function(e){return{root:{background:e.palette.primary.main},title:{color:"white"}}})(Le.a),Je=Object(ce.withStyles)({card:{margin:"5% 25%"}})(function(e){var t=e.classes;return n.a.createElement(Re.a,{className:t.card},n.a.createElement(Pe,{title:"Current Drone Data"}),n.a.createElement(Ce.a,{style:{textAlign:"center"}},n.a.createElement(Ge,null)))}),ze=function(){var e=Object(u.combineReducers)({weather:ee,droneData:re}),t=Object(i.composeWithDevTools)({}),a=Object(s.a)(),r=Object(u.applyMiddleware)(a),n=Object(u.createStore)(e,t(r));return K.forEach(a.run),n}(),$e=Object(ce.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{main:"rgb(226,231,238)"}}}),qe=function(e){return n.a.createElement(ce.MuiThemeProvider,{theme:$e},n.a.createElement(ue.a,null),n.a.createElement(ne.a,{store:ze},n.a.createElement(ke,null,n.a.createElement(_e,null),n.a.createElement(Je,null),n.a.createElement(I.ToastContainer,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},99:function(e,t,a){e.exports=a(216)}},[[99,2,1]]]);
//# sourceMappingURL=main.cd034333.chunk.js.map