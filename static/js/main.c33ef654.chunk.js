(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{348:function(e,t,a){e.exports=a(736)},736:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(55),o=a.n(c),i=a(71),u=a(299),l=a(322),s=a(110),d=a(10),m=a.n(d),p=a(13),h=a(84),f=(a(145),{findLocationByLatLng:function(){var e=Object(h.a)(m.a.mark(function e(t,a){var n,r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t,a].join(","),e.next=3,fetch("https://react-assessment-api.herokuapp.com/api/weather/location/search/?lattlong=".concat(n));case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:{code:r.status}});case 6:return e.next=8,r.json();case 8:return c=e.sent,e.abrupt("return",{data:c});case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),findWeatherbyId:function(){var e=Object(h.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-assessment-api.herokuapp.com/api/weather/location/".concat(t,"/"));case 2:if((a=e.sent).ok){e.next=5;break}return e.abrupt("return",{error:{code:a.status}});case 5:return e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",{data:n});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getDroneData:function(){var e=Object(h.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-assessment-api.herokuapp.com/api/drone");case 2:if((t=e.sent).ok){e.next=5;break}return e.abrupt("return",{error:{code:t.status}});case 5:return e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",{data:a});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),b="COMMAND/FETCH_WEATHER_FOR_LAT_LNG",g="EVENT/API_ERROR_RECEIVED",E="EVENT/WEATHER_DATA_RECEIVED",v="EVENT/WEATHER_ID_RECEIVED",y="COMMAND/FETCH_DRONE_DATA",O="EVENT/DRONE_DATA_RECEIVED",j="EVENT/DRONE_DATA_ERROR",w=m.a.mark(D),k=m.a.mark(_),x=m.a.mark(M);function D(e){var t,a,n,r;return m.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.id,c.next=3,Object(p.b)(f.findWeatherbyId,t);case 3:if(a=c.sent,n=a.error,r=a.data,!n){c.next=12;break}return c.next=9,Object(p.d)({type:g,code:n.code});case 9:return c.next=11,Object(p.c)();case 11:return c.abrupt("return");case 12:return c.next=14,Object(p.d)({type:E,data:r});case 14:case"end":return c.stop()}},w)}function _(e){var t,a,n,r,c,o;return m.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.latitude,a=e.longitude,i.next=3,Object(p.b)(f.findLocationByLatLng,t,a);case 3:if(n=i.sent,r=n.error,c=n.data,!r){i.next=13;break}return console.log({error:r}),i.next=10,Object(p.d)({type:g,code:r.code});case 10:return i.next=12,Object(p.c)();case 12:return i.abrupt("return");case 13:if(o=!!c[0]&&c[0].woeid){i.next=20;break}return i.next=17,Object(p.d)({type:g});case 17:return i.next=19,Object(p.c)();case 19:return i.abrupt("return");case 20:return i.next=22,Object(p.d)({type:v,id:o});case 22:case"end":return i.stop()}},k)}function M(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)([Object(p.e)(b,_),Object(p.e)(v,D)]);case 2:case"end":return e.stop()}},x)}var A=[M],C=m.a.mark(R),T=m.a.mark(S);function R(e){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)(f.getDroneData);case 2:if(t=e.sent,a=t.error,n=t.data,!a){e.next=12;break}return console.log("error",{error:a}),e.next=9,Object(p.d)({type:j,payload:a.code});case 9:return e.next=11,Object(p.c)();case 11:return e.abrupt("return");case 12:return e.next=14,Object(p.d)({type:O,data:n});case 14:case"end":return e.stop()}},C)}function S(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)([Object(p.e)(y,R)]);case 2:case"end":return e.stop()}},T)}var N=[S],L=a(85),I=m.a.mark(V),F=m.a.mark(W);function V(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.b)(L.toast.error,"Error Received: ".concat(e.code));case 2:case"end":return t.stop()}},I)}function W(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.e)(g,V);case 2:case"end":return e.stop()}},F)}var P=[W],G=m.a.mark(H),B=m.a.mark(U);function H(e){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.b)(L.toast.error,"Drone data fetch error: ".concat(e.code));case 2:case"end":return t.stop()}},G)}function U(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.e)(j,H);case 2:case"end":return e.stop()}},B)}var J,z,K=[U],Q=[].concat(Object(s.a)(P),Object(s.a)(K),Object(s.a)(A),Object(s.a)(N)),Y=a(43),Z=a(323),$=a(63),q={loading:!1,weatherId:null,name:"",temperature:"",weather_state_name:"",latitude:null,longitude:null,data:{}},X=(J={},Object(Y.a)(J,b,function(e,t){return Object($.a)({},e,{loading:!0})}),Object(Y.a)(J,v,function(e,t){return Object($.a)({},e,{weatherId:t.id})}),Object(Y.a)(J,E,function(e,t){var a=t.data;if(!a.consolidated_weather)return e;var n,r=a.consolidated_weather[0],c=r.weather_state_name,o=r.the_temp,i=a.latt_long,u=a.title,l=i.split(","),s=Object(Z.a)(l,2),d=s[0],m=s[1];return Object($.a)({},e,{loading:!1,latitude:d,longitude:m,temperatureinCelsius:o,temperatureinFahrenheit:(n=o,9*n/5+32),weather_state_name:c,name:u,data:t.data})}),J),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,a=X[t.type];return"undefined"===typeof a?e:a(e,t)},te={loading:null,drone_data:{},current_data:{},error:!1},ae=(z={},Object(Y.a)(z,b,function(e,t){if(!1!==e.loading)return Object($.a)({},e,{loading:!0})}),Object(Y.a)(z,O,function(e,t){var a=t.data.data;return Object($.a)({},e,{loading:!1,drone_data:a,current_data:a[a.length-1],error:!1})}),Object(Y.a)(z,j,function(e,t){return Object($.a)({},e,{loading:!1,error:!0})}),z),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,a=ae[t.type];return"undefined"===typeof a?e:a(e,t)},re=a(89),ce=a(29),oe=a(321),ie=a.n(oe),ue=(a(365),a(137)),le=a.n(ue),se=a(304),de=a.n(se),me=a(305),pe=a.n(me),he=a(58),fe=a(59),be=a(61),ge=a(60),Ee=a(62),ve=a(303),ye=a.n(ve),Oe=a(302),je=a.n(Oe),we=Object(ce.withStyles)(function(e){return{root:{background:e.palette.secondary.main},label:{color:e.palette.primary.main}}})(je.a),ke=function(e){function t(){return Object(he.a)(this,t),Object(be.a)(this,Object(ge.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(fe.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.name,n=e.weather_state_name,c=e.temperatureinFahrenheit;return t?r.a.createElement(ye.a,null):r.a.createElement(we,{label:"Weather in ".concat(a,": ").concat(Math.round(10*c)/10,"\xb0F and ").concat(n)})}}]),t}(n.Component),xe=Object(re.b)(function(e,t){var a=e.weather;return{loading:a.loading,name:a.name,weather_state_name:a.weather_state_name,temperatureinFahrenheit:a.temperatureinFahrenheit}},function(e){return{onLoad:function(){return e({type:b,longitude:-95.3698,latitude:29.7604})}}})(ke),De=Object(ce.withStyles)({grow:{flexGrow:1}})(function(e){var t=e.classes;return r.a.createElement(de.a,{position:"static"},r.a.createElement(pe.a,null,r.a.createElement(le.a,{variant:"h6",color:"inherit",className:t.grow},""," EOG React Visualization Assessment"),r.a.createElement(xe,null)))}),_e=Object(ce.withStyles)(function(e){return{wrapper:{background:e.palette.background.main,height:"100%"}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.wrapper},e.children)}),Me=a(143),Ae=a.n(Me),Ce=a(320),Te=a.n(Ce),Re=a(144),Se=a.n(Re),Ne=a(109),Le=a.n(Ne),Ie=a(44),Fe=a(307),Ve=a.n(Fe),We=a(106),Pe=a.n(We),Ge=a(107),Be=a.n(Ge),He=a(306),Ue=a.n(He),Je=function(e){function t(e){var a;return Object(he.a)(this,t),(a=Object(be.a)(this,Object(ge.a)(t).call(this,e))).fetchData=a.fetchData.bind(Object(Ie.a)(Object(Ie.a)(a))),a.daysDiff=a.daysDiff.bind(Object(Ie.a)(Object(Ie.a)(a))),a}return Object(Ee.a)(t,e),Object(fe.a)(t,[{key:"fetchData",value:function(){this.props.onLoad()}},{key:"componentDidMount",value:function(){setInterval(this.fetchData,2e3)}},{key:"daysDiff",value:function(e,t){var a=e.getTime(),n=t.getTime()-a;n/=1e3;var r=Math.floor(n%60);n/=60;var c=Math.floor(n%60);n/=60;var o=Math.floor(n%24),i=Math.floor(n/24);return i>0?1===i?i+" day ago":i+" days ago":o>0?1===o?o+" hour ago":o+" hours ago":c>0?1===c?c+" minute ago":c+" minutes ago":r>0?1===r?r+" second ago":r+" seconds ago":"now"}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.current_data,n=e.error;if(t)return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement("div",{style:{top:"50%"}},r.a.createElement(Ue.a,null)));if(n)return r.a.createElement("div",null,"Error fetching drone data!");if(Object.getOwnPropertyNames(a).length){var c=new Date,o=new Date(a.timestamp),i=this.daysDiff(o,c),u=o.toLocaleDateString()+" "+o.toLocaleTimeString()+" ("+i+")";return r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"center"}},!n&&r.a.createElement("span",null," Data being fetched every 2 seconds"),n&&r.a.createElement("span",null," Error Fetching Drone Data")),r.a.createElement(Ve.a,{style:{textAlign:"center"}},r.a.createElement(Pe.a,null,r.a.createElement(Be.a,{primary:"Temperature (\xb0F)",secondary:a.metric})),r.a.createElement(Pe.a,null,r.a.createElement(Be.a,{primary:"Latitude",secondary:a.latitude})),r.a.createElement(Pe.a,null,r.a.createElement(Be.a,{primary:"Longitude",secondary:a.longitude})),r.a.createElement(Pe.a,null,r.a.createElement(Be.a,{primary:"Last Received",secondary:u}))))}return r.a.createElement("div",{style:{textAlign:"center"}},"Fetching Data")}}]),t}(n.Component),ze=Object(re.b)(function(e,t){var a=e.droneData;return{loading:a.loading,drone_data:a.drone_data,current_data:a.current_data,error:a.error}},function(e){return{onLoad:function(){return e({type:y,payload:null})}}})(Je),Ke=a(202),Qe=a(108),Ye=a(83),Ze=Object(Ke.a)(Object(Ke.b)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAEAPlYDbuC1VC6UUQuJmUT8Ei_plhLwiI&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),Qe.withScriptjs,Qe.withGoogleMap)(function(e){return r.a.createElement(Qe.GoogleMap,{defaultZoom:4,defaultCenter:{lat:29.761993,lng:-95.366302}},e.isMarkerShown&&r.a.createElement(Qe.Marker,{position:{lat:e.latitude,lng:e.longitude},onClick:e.onMarkerClick}))}),$e=function(e){function t(){var e,a;Object(he.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(be.a)(this,(e=Object(ge.a)(t)).call.apply(e,[this].concat(r)))).state={isMarkerShown:!1,latitude:29.761993,longitude:-95.366302},a.delayedShowMarker=function(){setTimeout(function(){a.setState({isMarkerShown:!0})},3e3)},a.handleMarkerClick=function(){a.setState({isMarkerShown:!1}),a.delayedShowMarker()},a}return Object(Ee.a)(t,e),Object(fe.a)(t,[{key:"componentDidMount",value:function(){this.delayedShowMarker()}},{key:"render",value:function(){var e=this.props,t=(e.loading,e.current_data);e.error;return r.a.createElement(Ze,{isMarkerShown:this.state.isMarkerShown,onMarkerClick:this.handleMarkerClick,latitude:Number(t.latitude),longitude:Number(t.longitude)})}}]),t}(r.a.PureComponent),qe=Object(Ye.a)(function(e,t){var a=e.droneData;return{loading:a.loading,current_data:a.current_data,error:a.error}})($e),Xe=a(66),et=a(319),tt=a.n(et),at={barIndex:"uv",left:0,right:0},nt=function(e){function t(e){var a;return Object(he.a)(this,t),(a=Object(be.a)(this,Object(ge.a)(t).call(this,e))).state=at,a.handleChangeData=a.handleChangeData.bind(Object(Ie.a)(Object(Ie.a)(a))),a}return Object(Ee.a)(t,e),Object(fe.a)(t,[{key:"handleChangeData",value:function(){this.setState(function(e){var t=e.left;return{animation:!0,left:(void 0===t?0:t)-2}})}},{key:"componentWillReceiveProps",value:function(){this.handleChangeData()}},{key:"render",value:function(){var e=this.props.drone_data,t=this.state,a=t.animation,n=t.left,c=Array.from(Object.keys(e),function(t){return e[t]});return r.a.createElement("div",{style:{position:"relative",width:"100%"}},r.a.createElement(Xe.d,{width:"100%",height:400},r.a.createElement(Xe.c,{width:800,height:400,data:c,margin:{top:20,right:20,bottom:20,left:0}},r.a.createElement(Xe.a,{stroke:"#f5f5f5"}),r.a.createElement(Xe.f,{label:{value:"Timestamp",position:"centerBottom",dy:20},dataKey:"timestamp",padding:{left:n,right:-300},tick:!0,domain:["dataMin","dataMax"],tickFormatter:function(e){return tt()(e).format("hh:mm")},type:"number",scale:"time"}),r.a.createElement(Xe.g,{type:"number",domain:["auto","auto"],axisLine:!1}),r.a.createElement(Xe.e,null),r.a.createElement(Xe.b,{type:"linear",dataKey:"metric",dot:!1,stroke:"#ff7300",isAnimationActive:a,animationEasing:"linear",animationDuration:1e3}))))}}]),t}(r.a.Component),rt=Object(Ye.a)(function(e,t){var a=e.droneData;return{loading:a.loading,drone_data:a.drone_data,current_data:a.current_data,error:a.error}})(nt),ct={height:"100%",paddingTop:5,backgroundColor:"#fff"},ot=Object(ce.withStyles)(function(e){return{root:{background:e.palette.primary.main},title:{color:"white"}}})(Te.a),it=Object(ce.withStyles)(function(e){return{card:{height:"100%"},root:{flexGrow:1},paper:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(Le.a,{container:!0,spacing:24},r.a.createElement(Le.a,{item:!0,xs:12,sm:12,md:12,lg:3},r.a.createElement("div",{style:ct},r.a.createElement(Ae.a,{className:t.card},r.a.createElement(ot,{title:"Current Drone Data"}),r.a.createElement(Se.a,{style:{textAlign:"center",margin:0}},r.a.createElement(ze,null))))),r.a.createElement(Le.a,{item:!0,xs:12,sm:12,md:12,lg:9},r.a.createElement("div",{style:ct},r.a.createElement(Ae.a,{className:t.card},r.a.createElement(ot,{title:"Position of the Drone"}),r.a.createElement(Se.a,{style:{textAlign:"center"}},r.a.createElement(qe,null))))),r.a.createElement(Le.a,{item:!0,xs:12},r.a.createElement("div",{style:ct},r.a.createElement(Ae.a,{className:t.card},r.a.createElement(ot,{title:"Metric Chart"}),r.a.createElement(Se.a,{style:{textAlign:"center"}},r.a.createElement(rt,null)))))))}),ut=function(){var e=Object(i.combineReducers)({weather:ee,droneData:ne}),t=Object(u.composeWithDevTools)({}),a=Object(l.a)(),n=Object(i.applyMiddleware)(a),r=Object(i.createStore)(e,t(n));return Q.forEach(a.run),r}(),lt=Object(ce.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{main:"rgb(226,231,238)"}}}),st=function(e){return r.a.createElement(ce.MuiThemeProvider,{theme:lt},r.a.createElement(ie.a,null),r.a.createElement(re.a,{store:ut},r.a.createElement(_e,null,r.a.createElement(De,null),r.a.createElement("div",{style:{margin:"1rem"}},r.a.createElement(it,null),r.a.createElement(L.ToastContainer,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(st,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[348,2,1]]]);
//# sourceMappingURL=main.c33ef654.chunk.js.map